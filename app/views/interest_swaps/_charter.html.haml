:javascript
  // THIS FUNCTION REGENERATES THE GRAPHS
    function regenGraphs() {
        var e = $("#gridlist").children("li");
        e.each(function(e) {
            idsearch = $(this).children(".panel-heading").prop("id");
            droppableDiv = $(this).prop("id");
            if ($(this).children(".panel-heading").hasClass("timeseries") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
                ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_timeseries")
            } else if ($(this).children(".panel-heading").hasClass("termstructure") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
                ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_termstructure")
            } else if ($(this).children(".panel-heading").hasClass("datatable") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
                ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_datatable")
            } else if ($(this).children(".panel-heading").hasClass("details") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
                ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_details")
            } else if ($(this).children(".panel-heading").hasClass("delta") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
                ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_delta")
            } else if ($(this).children(".panel-heading").hasClass("ois") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
                ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_ois")
            } else if ($(this).children(".panel-heading").hasClass("ccy") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
                ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_ccy")
            }
        });
        graphChecker();
        spinner.stop();
        $("#mainpage").fadeTo("slow", 1)
    }

    function ajaxGraphs(e) {
        $.ajax({
            async: false,
            url: e
        })
    }

    function graphChecker() {
        var e = $("#gridlist").children("li");
        e.each(function(e) {
            if ($.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
                singleGraphGen();
            }
        })
    }

    function singleGraphGen() {
      idsearch = $(this).children(".panel-heading").prop("id");
      droppableDiv = $(this).prop("id");
      if ($(this).children(".panel-heading").hasClass("timeseries") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
          ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_timeseries")
      } else if ($(this).children(".panel-heading").hasClass("termstructure") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
          ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_termstructure")
      } else if ($(this).children(".panel-heading").hasClass("datatable") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
          ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_datatable")
      } else if ($(this).children(".panel-heading").hasClass("details") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
          ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_details")
      } else if ($(this).children(".panel-heading").hasClass("delta") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
          ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_delta")
      } else if ($(this).children(".panel-heading").hasClass("ois") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
          ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_ois")
      } else if ($(this).children(".panel-heading").hasClass("ccy") && $.isNumeric($(this).children(".panel-heading").prop("id")) && $(this).children(".panel-body").html() == "") {
          ajaxGraphs("/users/#{@user.id}/searches/" + idsearch + "/show_ccy")
      }
    };
