$(function() {
    $(".draggable").draggable({
        helper: "clone",
        drag: function(e, t) {
            $(".droppable").droppable({
                accept: ".draggable",
                hoverClass: "drop-hover",
                drop: function(e, t) {
                    droppableDiv = $(e.target).children(".widgetholder").attr("id");
                    alert(droppableDiv);
                    searchId = t.draggable.attr("id");
                    panelid = $(e.target).children(".widgetholder").children(".panel-heading").attr("id", searchId);
                    panelClassChecker = $(e.target).children(".widgetholder").children(".panel-heading");
                    for (i = 0; i < chartLister.length; i++){
                      var chartname = chartLister[i];
                      if (panelClassChecker.hasClass(chartLister[i])) {
                        var data = {"graph_type" : chartname, "bodyid" : droppableDiv}
                        $.ajax({
                            type: "POST",
                            url: "/users/" + gon.userid + "/searches/" + searchId + "/show_chart",
                            data: data
                        })
                      }
                    }
                }
            })
        }
    })
});